# å¼€å‘ç¯å¢ƒå…¼å®¹æ€§è¯´æ˜\n\n## macOS ç‰ˆæœ¬å…¼å®¹é—®é¢˜\n\nå¦‚æœæ‚¨é‡åˆ° macOS ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼ˆéœ€è¦ 13.5.0+ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š\n\n### æ–¹æ¡ˆä¸€ï¼šæ›´æ–° Wranglerï¼ˆæ¨èï¼‰\n\n```bash\ncd backend\n\n# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬\nnpm install --save-dev wrangler@latest\n\n# ä½¿ç”¨ npx è¿è¡Œ\nnpx wrangler dev\n```\n\n### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ Dockerï¼ˆæ¨èç”¨äºä¸å…¼å®¹çš„ macOSï¼‰\n\nåˆ›å»º `backend/Dockerfile.dev`ï¼š\n\n```dockerfile\nFROM node:18-alpine\n\nWORKDIR /app\n\n# å®‰è£…ä¾èµ–\nCOPY package*.json ./\nRUN npm install\n\n# å¤åˆ¶æºä»£ç \nCOPY . .\n\n# æš´éœ²ç«¯å£\nEXPOSE 8787\n\n# å¯åŠ¨å¼€å‘æœåŠ¡å™¨\nCMD [\"npm\", \"run\", \"dev\", \"--\", \"--ip\", \"0.0.0.0\"]\n```\n\nåˆ›å»º `backend/docker-compose.yml`ï¼š\n\n```yaml\nversion: '3.8'\nservices:\n  backend:\n    build:\n      context: .\n      dockerfile: Dockerfile.dev\n    ports:\n      - \"8787:8787\"\n    volumes:\n      - .:/app\n      - /app/node_modules\n    environment:\n      - NODE_ENV=development\n```\n\nä½¿ç”¨ Docker è¿è¡Œï¼š\n\n```bash\ncd backend\ndocker-compose up\n```\n\n### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨åœ¨çº¿å¼€å‘ç¯å¢ƒ\n\n1. **GitHub Codespaces**\n   - ç›´æ¥åœ¨ GitHub ä¸Šæ‰“å¼€é¡¹ç›®\n   - ç‚¹å‡»ç»¿è‰²çš„ \"Code\" æŒ‰é’® â†’ \"Codespaces\" â†’ \"Create codespace\"\n\n2. **Gitpod**\n   - è®¿é—® `https://gitpod.io/#https://github.com/Rexingleung/mastra-fortune-telling`\n\n### æ–¹æ¡ˆå››ï¼šæ¨¡æ‹Ÿåç«¯ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰\n\nå¦‚æœåªæ˜¯æƒ³æµ‹è¯•å‰ç«¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿåç«¯ï¼š\n\n```bash\ncd backend\nnpm install express cors\n```\n\nåˆ›å»º `backend/mock-server.js`ï¼š\n\n```javascript\nconst express = require('express');\nconst cors = require('cors');\nconst app = express();\n\napp.use(cors());\napp.use(express.json());\n\n// å¥åº·æ£€æŸ¥\napp.get('/', (req, res) => {\n  res.json({ \n    message: 'å¤©æœºé˜ API æœåŠ¡è¿è¡Œä¸­ ğŸ”®',\n    timestamp: new Date().toISOString(),\n    services: ['tarot', 'fengshui', 'zodiac', 'naming', 'guzi', 'chat']\n  });\n});\n\n// æ¨¡æ‹ŸèŠå¤©æµå¼æ¥å£\napp.post('/api/chat/stream', (req, res) => {\n  res.writeHead(200, {\n    'Content-Type': 'text/plain',\n    'Cache-Control': 'no-cache',\n    'Connection': 'keep-alive',\n  });\n\n  const message = 'ğŸ”® æ ¹æ®æ‚¨çš„é—®é¢˜ï¼Œæˆ‘ä¸ºæ‚¨è§£è¯»å¦‚ä¸‹ï¼šè¿™æ˜¯ä¸€ä¸ªå……æ»¡å¯èƒ½æ€§çš„æ—¶æœŸï¼Œå»ºè®®æ‚¨ä¿æŒç§¯æçš„å¿ƒæ€ï¼Œç›¸ä¿¡è‡ªå·±çš„ç›´è§‰ã€‚å‘½è¿æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œç®—å‘½åªæ˜¯ä¸ºæ‚¨æä¾›å‚è€ƒå’Œå¯å‘ã€‚';\n  \n  // æ¨¡æ‹Ÿæ‰“å­—æœºæ•ˆæœ\n  let i = 0;\n  const interval = setInterval(() => {\n    if (i < message.length) {\n      res.write(`data: ${JSON.stringify(message[i])}\\n\\n`);\n      i++;\n    } else {\n      res.write(`data: ${JSON.stringify({ finishReason: 'stop' })}\\n\\n`);\n      res.end();\n      clearInterval(interval);\n    }\n  }, 100);\n});\n\n// å…¶ä»–APIæ¨¡æ‹Ÿ\napp.post('/api/tarot/draw', (req, res) => {\n  res.json({\n    readingId: `reading-${Date.now()}`,\n    cards: [{ id: 0, name: 'The Fool', nameCn: 'æ„šè€…', meaning: 'æ–°å¼€å§‹', isReversed: false }],\n    spreadType: 'single'\n  });\n});\n\napp.post('/api/zodiac/fortune', (req, res) => {\n  res.json({\n    fortuneId: `zodiac-${Date.now()}`,\n    fortune: 'â­ æ‚¨çš„æ˜Ÿåº§è¿åŠ¿æ•´ä½“å‘å¥½ï¼Œç‰¹åˆ«æ˜¯åœ¨äººé™…å…³ç³»æ–¹é¢ä¼šæœ‰çªç ´ã€‚',\n    sign: req.body.sign\n  });\n});\n\n// å…¶ä»–è·¯ç”±...\n\nconst PORT = 8787;\napp.listen(PORT, () => {\n  console.log(`ğŸš€ æ¨¡æ‹Ÿåç«¯æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:${PORT}`);\n});\n```\n\nåœ¨ `backend/package.json` ä¸­æ·»åŠ è„šæœ¬ï¼š\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"npx wrangler dev\",\n    \"dev:mock\": \"node mock-server.js\",\n    \"deploy\": \"npx wrangler deploy\"\n  }\n}\n```\n\nè¿è¡Œæ¨¡æ‹Ÿåç«¯ï¼š\n\n```bash\ncd backend\nnpm run dev:mock\n```\n\n### æ¨èæµç¨‹\n\n1. **ä¼˜å…ˆå°è¯•æ–¹æ¡ˆä¸€**ï¼šæ›´æ–° Wrangler\n2. **å¦‚æœä»æœ‰é—®é¢˜**ï¼šä½¿ç”¨æ–¹æ¡ˆäºŒ Docker\n3. **å¿«é€Ÿæµ‹è¯•**ï¼šä½¿ç”¨æ–¹æ¡ˆå››æ¨¡æ‹Ÿåç«¯\n4. **ç”Ÿäº§éƒ¨ç½²**ï¼šç›´æ¥ä½¿ç”¨ `wrangler deploy`\n\nè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸‹ç»§ç»­å¼€å‘äº†ï¼ğŸš€"